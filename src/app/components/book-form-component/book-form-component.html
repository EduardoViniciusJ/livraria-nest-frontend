<form [formGroup]="form" class="flex flex-column gap-3">

  <div>
    <label class="font-bold">Título</label>
    <input pInputText formControlName="title" class="w-full" />

    @if (form.controls['title'].hasError('required') && form.controls['title'].touched) {
      <small class="p-error">O título é obrigatório.</small>
    }

    @if (form.controls['title'].hasError('minlength') && form.controls['title'].touched) {
      <small class="p-error">O título deve ter pelo menos 1 caractere.</small>
    }

    @if (form.controls['title'].hasError('maxlength') && form.controls['title'].touched) {
      <small class="p-error">O título deve ter no máximo 254 caracteres.</small>
    }
  </div>

  <div>
    <label class="font-bold">Autor</label>
    <input pInputText formControlName="author" class="w-full" />

    @if (form.controls['author'].hasError('required') && form.controls['author'].touched) {
      <small class="p-error">O autor é obrigatório.</small>
    }

    @if (form.controls['author'].hasError('maxlength') && form.controls['author'].touched) {
      <small class="p-error">O autor deve ter no máximo 254 caracteres.</small>
    }
  </div>

  <div>
    <label class="font-bold">Preço</label>
    <input pInputText type="" formControlName="price" class="w-full" />

    @if (form.controls['price'].hasError('required') && form.controls['price'].touched) {
      <small class="p-error">O preço é obrigatório.</small>
    }

    @if (form.controls['price'].hasError('min') && form.controls['price'].touched) {
      <small class="p-error">O preço deve ser maior que zero.</small>
    }
  </div>

  <div>
    <label class="font-bold">Categorias</label>
    <p-multiSelect 
      [options]="categories"
      optionLabel="name"
      optionValue="id"
      formControlName="categories"
      class="w-full"
      appendTo="body"
    ></p-multiSelect>

    @if (form.controls['categories'].hasError('required') && form.controls['categories'].touched) {
      <small class="p-error">Selecione pelo menos uma categoria.</small>
    }
  </div>

  <div>
    <label class="font-bold">Capa do Livro</label>
    <input type="file" (change)="onFileChange($event)" accept=".jpg,.jpeg,.png" class="w-full" />

    @if (selectedImage) {
      <small class="text-sm text-green-600">Arquivo selecionado: {{ selectedImage.name }}</small>
    }
  </div>

  <div class="flex justify-end mt-3 gap-2">
    <p-button label="Cancelar" severity="secondary" (click)="onCancel()"></p-button>
    <p-button label="Salvar" severity="success" (click)="onSubmit()"></p-button>
  </div>

</form>
